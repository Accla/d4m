
This file contains the results of testing lookup performance of map files
under varying conditions.  Map files are at the heart of cloudbase so tuning
them is one component of improving query performance.  

A map file containing 5,560,317 entries was taken off of a production system
to conduct these test. The data from this map file was used to create other
map files for this testing.  27808 entries were randomly selected from the map
file and used in all of the lookup test below.

While running these test the MapFiles were in HDFS.  The test were run on the
HDFS node containing the map files.  All map file data was likely cached in OS
filesystem cache.  

TODO 
* run test on HDFS node and off (using same lookup values)
* vary sequence file buffer size
* run test when data is not cached in OS FS cache

LEGEND

bs  : sequence file compression block size (hadoop defaults to 1M
      determined by io.seqfile.compress.blocksize setting)
fs  : total size of map files
nmf : number of map files (data is randomly split into multiple map
      files for testing) 
q/s : # of queries or lookups per second were able to do (the 
      MultipleMapFileIterator seek() method was used for all lookups) 
s   : total amount of time all lookup took in seconds
m   : misses, keys not found (should be 0 as we are looking up
      randomly selected keys from the test data)

MMFI   bs =       10,000 fs =  275,231,730 nmf = 1  q/s =   891.60 s =    31.19 m = 0
MMFI   bs =       50,000 fs =  238,932,381 nmf = 1  q/s =   614.24 s =    45.27 m = 0
MMFI   bs =      100,000 fs =  233,708,595 nmf = 1  q/s =   452.00 s =    61.52 m = 0
MMFI   bs =      500,000 fs =  228,013,822 nmf = 1  q/s =   152.96 s =   181.80 m = 0
MMFI   bs =    1,000,000 fs =  227,176,816 nmf = 1  q/s =    84.21 s =   330.22 m = 0
MMFI   bs =    2,000,000 fs =  226,759,922 nmf = 1  q/s =    44.66 s =   622.72 m = 0
MMFI   bs =       10,000 fs =  285,725,323 nmf = 2  q/s =   442.85 s =    62.79 m = 0
MMFI   bs =       50,000 fs =  248,105,729 nmf = 2  q/s =   305.02 s =    91.17 m = 0
MMFI   bs =      100,000 fs =  242,514,699 nmf = 2  q/s =   227.35 s =   122.31 m = 0
MMFI   bs =      500,000 fs =  236,503,699 nmf = 2  q/s =    75.61 s =   367.80 m = 0
MMFI   bs =    1,000,000 fs =  235,608,171 nmf = 2  q/s =    41.66 s =   667.48 m = 0
MMFI   bs =    2,000,000 fs =  235,185,965 nmf = 2  q/s =    21.76 s =  1277.86 m = 0
MMFI   bs =       10,000 fs =  292,085,940 nmf = 3  q/s =   295.62 s =    94.07 m = 0
MMFI   bs =       50,000 fs =  253,619,395 nmf = 3  q/s =   202.58 s =   137.27 m = 0
MMFI   bs =      100,000 fs =  247,788,333 nmf = 3  q/s =   149.34 s =   186.20 m = 0
MMFI   bs =      500,000 fs =  241,617,599 nmf = 3  q/s =    50.17 s =   554.23 m = 0
MMFI   bs =    1,000,000 fs =  240,678,657 nmf = 3  q/s =    27.49 s =  1011.55 m = 0
MMFI   bs =    2,000,000 fs =  240,218,431 nmf = 3  q/s =    14.47 s =  1921.76 m = 0
MMFI   bs =       10,000 fs =  300,107,459 nmf = 5  q/s =   175.27 s =   158.66 m = 0
MMFI   bs =       50,000 fs =  260,497,191 nmf = 5  q/s =   119.34 s =   233.02 m = 0
MMFI   bs =      100,000 fs =  254,424,968 nmf = 5  q/s =    88.90 s =   312.81 m = 0
MMFI   bs =      500,000 fs =  248,020,311 nmf = 5  q/s =    29.74 s =   935.11 m = 0
MMFI   bs =    1,000,000 fs =  247,032,093 nmf = 5  q/s =    16.30 s =  1706.18 m = 0
MMFI   bs =    2,000,000 fs =  246,559,311 nmf = 5  q/s =     8.59 s =  3236.57 m = 0
MMFI   bs =       10,000 fs =  305,356,380 nmf = 7  q/s =   127.21 s =   218.60 m = 0
MMFI   bs =       50,000 fs =  264,962,425 nmf = 7  q/s =    90.42 s =   307.55 m = 0
MMFI   bs =      100,000 fs =  258,716,652 nmf = 7  q/s =    65.02 s =   427.70 m = 0
MMFI   bs =      500,000 fs =  252,149,850 nmf = 7  q/s =    23.43 s =  1186.87 m = 0
MMFI   bs =    1,000,000 fs =  251,146,039 nmf = 7  q/s =    12.30 s =  2260.37 m = 0
MMFI   bs =    2,000,000 fs =  250,667,926 nmf = 7  q/s =     7.00 s =  3974.63 m = 0


